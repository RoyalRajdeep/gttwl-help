# Travel Agency Tribes API Documentation

# Authenticaton Routes

Login

Http Request
POST https://api2.gttwl.net/tat_api/v1/login 

| Method | Route | Parameters | Result |
| ------ | ------ | ------ | ------ |
| POST | /tat_api/v1/loginemail |   | Code will be sent to user’s email address |

Parameters
| Email | String, required, The email address of the user. |

This method accepts a users email address as its only parameter. If the user is found in The system will send an authentication code to the user's email

if the user exists in the system

`{
  content-type: "json", 
  message: "Please check your email for authentication code",  
  token: "4mmwsosbem", 
  state:"ok", 
  status: 200 
}`

Properties

The following table defines the properties that appear in the response

| Name | Description |
| ------ | ------ |
| token | String, This is a randomly generated authentication token that needs to be passed in /v1/code in order to authenticate the authentication code that was sent to the user’s email. |
| state | String, the state will be “ok” if the call was successful. If not the state will be “error” |

Error messages

``{
    content-type: "json",
    state:"error",
    message:"invalid request",
    status:400
}``



# Email Validation
POST https://api2.gttwl.net/tat_api/v1/code

| Method | Route | Parameters | Result
| ------ | ------ | ------ | ------ |
POST | /tat_api/v1/code | code , token | Json Map showing list of agencies the user is apart of and the user api key for each |

Parameters

| Name | Description |
| ------ | ------ |
| code | Integer, required, The 6 digit code sent to the user's email used for authentication |
| token | String, required, Random String generated by the server used in authentication, required during login to authenticate the user | 

This route accepts the authentication code sent to the user via email.

Upon successful authentication returns a "json" map with list of agencies that user is associated with:

` {
   content-type: "json",
   data:[
          {
            agency_name: "Just travel",
            apikey: "lsfw42ns",
            role: "admin",
            agency_url:"justtravel.com", 
            name:"John Mctavish"
          },.....
        ],
   state:"ok",
   Status:200
}
`
Properties
The following table defines the properties that appear in the response

| Name | Description |
| ------ | ------ |
| agency_name | String, the Name of an agency that the client is a part of |
| apikey | String, An authentication string used for requests
| role | String, This is a string dictating the role of the user in the agency, User roles are [“admin”, “agent”] |
| agency_url | String, This is the URL for the agencies website |
| name | String, This is the name of the client |

General Error :
`
{
   content-type: "json",
   state:"error",
   message:"Please contact support",
   status:400
}`  

Bad Request(missing parameters):

`
{
   content-type:"json",
   state:"error",
   message:"Missing parameters",
   status:400
}
`


# CONTENT ROUTES
Get all Content(completed)
Http Request
GET https://api2.gttwl.net/tat_api/v1/contents


| Method | Route | Parameters | Result
| ------ | ------ | ------ | ------ |
| GET | /tat_api/v1/contents | apikey, page, rows, q, kind, supplier, type | List of content for that particular agency | 








